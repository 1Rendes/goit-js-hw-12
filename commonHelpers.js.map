{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderImages(input) {\n  return Array.from({ length: input.hits.length }, (_, index) => {\n    const li = document.createElement('li');\n    const a = document.createElement('a');\n    a.classList.add('gallery-link');\n    a.href = input.hits[index].largeImageURL;\n    const image = document.createElement('img');\n    image.classList.add('gallery-image');\n    image.src = input.hits[index].webformatURL;\n    image.alt = input.hits[index].tags;\n    const textDiv = document.createElement('div');\n    textDiv.classList.add('text-div');\n    a.appendChild(image);\n    a.appendChild(textDiv);\n    li.appendChild(a);\n    textDiv.innerHTML += `<p><b>Likes</b><br>${input.hits[index].likes}</p><p><b>Views</b><br>${input.hits[index].views}</p><p><b>Comments</b><br>${input.hits[index].comments}</p><p><b>Downloads</b><br>${input.hits[index].downloads}</p>`;\n    return li;\n  });\n}\n","import axios from 'axios';\nexport async function fetchImages(input, page) {\n  try {\n    const responce = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: '43920119-17be8655c7213217026175d69',\n        q: input,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: '15',\n        page: page,\n      },\n    });\n    return responce.data;\n  } catch (error) {\n    throw new Error(responce.status);\n  }\n}\n","import { renderImages } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst formInput = document.querySelector('.search-image-form');\nlet imagesDiv = document.querySelector('.gallery');\nconst span = document.querySelector('.loader');\nconst showMore = document.querySelector('.show-more');\nlet page = 1;\nlet totalPage = 0;\nformInput.addEventListener('submit', event => {\n  event.preventDefault();\n  page = 1;\n  imagesDiv.innerHTML = '';\n  const searchRequest = formInput.elements.input.value.trim();\n  if (!searchRequest) {\n    return iziToast.error({\n      position: 'topRight',\n      message: 'Search request must not be blank',\n    });\n  }\n  showMore.classList.add('visually-hidden');\n  span.classList.remove('visually-hidden');\n  fetchImages(searchRequest)\n    .then(imagesData => {\n      if (!imagesData.total) {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        span.classList.add('visually-hidden');\n        return;\n      }\n      return imagesData;\n    })\n    .then(imagesData => {\n      totalPage = Math.ceil(imagesData.totalHits / 15);\n      imagesDiv.append(...renderImages(imagesData));\n      gallery.refresh();\n      span.classList.add('visually-hidden');\n      showMore.classList.remove('visually-hidden');\n      if (page === totalPage) {\n        showMore.classList.add('visually-hidden');\n        span.classList.add('visually-hidden');\n        iziToast.success({\n          position: 'topRight',\n          message: \"Than's all results for this request.\",\n        });\n        return;\n      }\n    })\n    .catch(error => console.log(`Error: ${error}`));\n});\nshowMore.addEventListener('click', () => {\n  showMoreHandler();\n});\nfunction showMoreHandler() {\n  showMore.classList.add('visually-hidden');\n  span.classList.remove('visually-hidden');\n  page++;\n  const searchRequest = formInput.elements.input.value.trim();\n  fetchImages(searchRequest, page)\n    .then(imagesData => {\n      imagesDiv.append(...renderImages(imagesData));\n      gallery.refresh();\n      if (page === totalPage) {\n        showMore.classList.add('visually-hidden');\n        span.classList.add('visually-hidden');\n        iziToast.error({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        return;\n      }\n      span.classList.add('visually-hidden');\n      const scrollSize =\n        (imagesDiv.firstChild.getBoundingClientRect().height + 24) * 2; //тут я додаю додатково 24 пікселі бо елемент не включає в себе розмір гепу. Але можна переробити верстку на маржін.\n      window.scrollBy({\n        top: scrollSize,\n        behavior: 'smooth',\n      });\n      showMore.classList.remove('visually-hidden');\n    })\n    .catch(error => {\n      console.log(`Error: ${error}`);\n    });\n}\n"],"names":["renderImages","input","_","index","li","a","image","textDiv","fetchImages","page","axios","gallery","SimpleLightbox","formInput","imagesDiv","span","showMore","totalPage","event","searchRequest","iziToast","imagesData","error","showMoreHandler","scrollSize"],"mappings":"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"}