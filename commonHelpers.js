import{a as g,S as v,i as d}from"./assets/vendor-b11e2a50.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=e(t);fetch(t.href,s)}})();function p(r){return Array.from({length:r.hits.length},(o,e)=>{const n=document.createElement("li"),t=document.createElement("a");t.classList.add("gallery-link"),t.href=r.hits[e].largeImageURL;const s=document.createElement("img");s.classList.add("gallery-image"),s.src=r.hits[e].webformatURL,s.alt=r.hits[e].tags;const a=document.createElement("div");return a.classList.add("text-div"),t.appendChild(s),t.appendChild(a),n.appendChild(t),a.innerHTML+=`<p><b>Likes</b><br>${r.hits[e].likes}</p><p><b>Views</b><br>${r.hits[e].views}</p><p><b>Comments</b><br>${r.hits[e].comments}</p><p><b>Downloads</b><br>${r.hits[e].downloads}</p>`,n})}async function y(r,o){try{return(await g.get("https://pixabay.com/api/",{params:{key:"43920119-17be8655c7213217026175d69",q:r,image_type:"photo",orientation:"horizontal",safesearch:"true",per_page:"15",page:o}})).data}catch{throw new Error(responce.status)}}let f=new v(".gallery a",{captions:!0,captionsData:"alt",captionDelay:250});const h=document.querySelector(".search-image-form");let u=document.querySelector(".gallery");const i=document.querySelector(".loader"),l=document.querySelector(".show-more");let c=1,m=0;h.addEventListener("submit",r=>{r.preventDefault(),c=1,u.innerHTML="";const o=h.elements.input.value.trim();if(!o)return d.error({position:"topRight",message:"Search request must not be blank"});l.classList.add("visually-hidden"),i.classList.remove("visually-hidden"),y(o).then(e=>{if(!e.total){d.error({position:"topRight",message:"Sorry, there are no images matching your search query. Please try again!"}),i.classList.add("visually-hidden");return}return e}).then(e=>{if(m=Math.ceil(e.totalHits/15),u.append(...p(e)),f.refresh(),i.classList.add("visually-hidden"),l.classList.remove("visually-hidden"),c===m){l.classList.add("visually-hidden"),i.classList.add("visually-hidden"),d.error({position:"topRight",message:"We're sorry, but you've reached the end of search results."});return}}).catch(e=>console.log(`Error: ${e}`))});l.addEventListener("click",()=>{L()});function L(){l.classList.add("visually-hidden"),i.classList.remove("visually-hidden"),c++;const r=h.elements.input.value.trim();y(r,c).then(o=>{if(u.append(...p(o)),f.refresh(),c===m){l.classList.add("visually-hidden"),i.classList.add("visually-hidden"),d.error({position:"topRight",message:"We're sorry, but you've reached the end of search results."});return}i.classList.add("visually-hidden");const e=(u.firstChild.getBoundingClientRect().height+24)*2;window.scrollBy({top:e,behavior:"smooth"}),l.classList.remove("visually-hidden")}).catch(o=>{console.log(`Error: ${o}`)})}
//# sourceMappingURL=commonHelpers.js.map
